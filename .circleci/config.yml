version: 2.1

parameters:
  one:
    type: string
    default: "one"
  noop:
    type: string
    default: "noop"

jobs:
  test:
    parameters:
      test:
        type: string
    docker:
      - image: circleci/python:3.7
    steps:
      - run: echo << parameters.test >>

workflows:
  workflow:
    jobs:
      - test:
          name: build-<< matrix.test >>
          matrix:
            exclude:
              - test: "noop"
            parameters:
              test: [<< pipeline.parameters.one >>, << pipeline.parameters.noop >>]
      - test:
          name: build-<< matrix.test >>
          matrix:
            exclude:
              - test: "noop"
            parameters:
              test: [one, noop]
